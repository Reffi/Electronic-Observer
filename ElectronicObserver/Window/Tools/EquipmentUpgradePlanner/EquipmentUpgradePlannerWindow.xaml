<common:WindowBase
	x:Class="ElectronicObserver.Window.Tools.EquipmentUpgradePlanner.EquipmentUpgradePlannerWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:common="clr-namespace:ElectronicObserver.Common"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:local="clr-namespace:ElectronicObserver.Window.Tools.EquipmentUpgradePlanner"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:types="clr-namespace:ElectronicObserverTypes;assembly=ElectronicObserverTypes"
	xmlns:ui="http://schemas.modernwpf.com/2019"
	Title="{Binding EquipmentUpgradePlanner.Title}"
	Width="900"
	Height="600"
	d:DataContext="{d:DesignInstance local:EquipmentUpgradePlannerViewModel}"
	ui:WindowHelper.UseModernWindowStyle="True"
	x:TypeArguments="local:EquipmentUpgradePlannerViewModel"
	mc:Ignorable="d"
	>
	<Window.Resources>
		<local:EquipmentUpgradePlannerBindingProxy x:Key="Proxy" DataContext="{Binding}" />

		<Style BasedOn="{StaticResource DefaultButtonStyle}" TargetType="Button">
			<Setter Property="FontFamily" Value="{Binding DataContext.Font, Source={StaticResource Proxy}}" />
			<Setter Property="FontSize" Value="{Binding DataContext.FontSize, Source={StaticResource Proxy}}" />
			<Setter Property="Foreground" Value="{Binding DataContext.FontBrush, Source={StaticResource Proxy}}" />
		</Style>

		<Style BasedOn="{StaticResource DefaultComboBoxStyle}" TargetType="ComboBox">
			<Setter Property="FontFamily" Value="{Binding DataContext.Font, Source={StaticResource Proxy}}" />
			<Setter Property="FontSize" Value="{Binding DataContext.FontSize, Source={StaticResource Proxy}}" />
			<Setter Property="Foreground" Value="{Binding DataContext.FontBrush, Source={StaticResource Proxy}}" />
			<Setter Property="VerticalAlignment" Value="Center" />
			<Setter Property="Margin" Value="4 0" />
		</Style>

		<Style TargetType="{x:Type ui:NumberBox}">
			<Setter Property="FontFamily" Value="{Binding DataContext.Font, Source={StaticResource Proxy}}" />
			<Setter Property="FontSize" Value="{Binding DataContext.FontSize, Source={StaticResource Proxy}}" />
			<Setter Property="Foreground" Value="{Binding DataContext.FontBrush, Source={StaticResource Proxy}}" />
			<Setter Property="VerticalAlignment" Value="Center" />
			<Setter Property="Margin" Value="4" />
		</Style>

		<Style BasedOn="{StaticResource DefaultCheckBoxStyle}" TargetType="CheckBox">
			<Setter Property="Margin" Value="4 0" />
			<Setter Property="Padding" Value="2 0" />
			<Setter Property="MinWidth" Value="0" />
		</Style>

	</Window.Resources>

	<ScrollViewer>

		<Grid>
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto" />
				<RowDefinition Height="*" />
			</Grid.RowDefinitions>


			<StackPanel Grid.Row="0" Orientation="Horizontal">
				<Button
					Margin="10 0 0 0"
					Command="{Binding AddEquipmentPlanCommand}"
					Content="{Binding EquipmentUpgradePlanner.AddOwnedEquipment}"
					/>

				<Button
					Margin="10 0 0 0"
					Command="{Binding AddEquipmentPlanFromMasterDataCommand}"
					Content="{Binding EquipmentUpgradePlanner.AddEquipmentFromLibrary}"
					/>

				<CheckBox
					Margin="10 0 0 0"
					Content="{Binding EquipmentUpgradePlanner.DisplayFinished}"
					IsChecked="{Binding DisplayFinished}"
					/>
			</StackPanel>


			<ItemsControl
				Grid.Row="1"
				Margin="0 5"
				HorizontalAlignment="Center"
				Grid.IsSharedSizeScope="True"
				ItemsSource="{Binding PlannedUpgradesFilteredAndSorted}"
				>

				<ItemsControl.ItemsPanel>
					<ItemsPanelTemplate>
						<WrapPanel Orientation="Horizontal" />
					</ItemsPanelTemplate>
				</ItemsControl.ItemsPanel>

				<ItemsControl.ItemTemplate>
					<DataTemplate>
						<Border BorderBrush="Gray" BorderThickness="1">
							<Grid Margin="4 10">
								<Grid.RowDefinitions>
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
									<RowDefinition Height="Auto" />
									<RowDefinition Height="*" />
								</Grid.RowDefinitions>

								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="Auto" SharedSizeGroup="Column1" />
									<ColumnDefinition Width="*" SharedSizeGroup="Column2" />
								</Grid.ColumnDefinitions>

								<Button
									Grid.Row="0"
									Grid.Column="0"
									Grid.ColumnSpan="2"
									Command="{Binding OpenEquipmentPickerCommand}"
									ToolTip="{Binding EquipmentName}"
									>
									<Button.Content>
										<TextBlock
											MaxWidth="150"
											Text="{Binding EquipmentName}"
											TextTrimming="CharacterEllipsis"
											/>
									</Button.Content>
								</Button>

								<Button
									Grid.Row="1"
									Grid.Column="0"
									Margin="0 10 0 0"
									Command="{Binding DataContext.RemovePlanCommand, Source={StaticResource Proxy}}"
									CommandParameter="{Binding}"
									Content="{Binding DataContext.EquipmentUpgradePlanner.Remove, Source={StaticResource Proxy}}"
									/>

								<TextBlock
									Grid.Row="2"
									Grid.Column="0"
									Margin="2 8"
									Text="{Binding DataContext.EquipmentUpgradePlanner.UpgradeLevel, Source={StaticResource Proxy}}"
									/>
								<TextBlock
									Grid.Row="2"
									Grid.Column="1"
									Margin="2 8"
									Text="{Binding CurrentLevelDisplay}"
									/>

								<TextBlock
									Grid.Row="3"
									Grid.Column="0"
									Margin="2 8"
									Text="{Binding DataContext.EquipmentUpgradePlanner.Goal, Source={StaticResource Proxy}}"
									/>
								<ComboBox
									Grid.Row="3"
									Grid.Column="1"
									ItemsSource="{Binding PossibleUpgradeLevels}"
									SelectedItem="{Binding DesiredUpgradeLevel}"
									>
									<ComboBox.ItemTemplate>
										<DataTemplate DataType="{x:Type types:UpgradeLevel}">
											<TextBlock Text="{Binding Converter={StaticResource EnumDisplayConverter}}" />
										</DataTemplate>
									</ComboBox.ItemTemplate>
								</ComboBox>

								<TextBlock
									Grid.Row="4"
									Grid.Column="0"
									Margin="2 8"
									Text="{Binding DataContext.EquipmentUpgradePlanner.Priority, Source={StaticResource Proxy}}"
									/>
								<ui:NumberBox
									Grid.Row="4"
									Grid.Column="1"
									HorizontalAlignment="Left"
									Value="{Binding Priority}"
									/>

								<TextBlock
									Grid.Row="5"
									Grid.Column="0"
									Margin="2 8"
									Text="{Binding DataContext.EquipmentUpgradePlanner.IsFinished, Source={StaticResource Proxy}}"
									/>
								<CheckBox
									Grid.Row="5"
									Grid.Column="1"
									IsChecked="{Binding Finished}"
									/>
							</Grid>
						</Border>

					</DataTemplate>
				</ItemsControl.ItemTemplate>
			</ItemsControl>
		</Grid>
	</ScrollViewer>
</common:WindowBase>
